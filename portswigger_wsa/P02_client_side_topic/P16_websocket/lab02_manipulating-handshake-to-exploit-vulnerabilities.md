# Manipulating the WebSocket handshake to exploit vulnerabilities

## This online shop has a live chat feature implemented using [WebSockets](https://portswigger.net/web-security/websockets).

## It has an aggressive but flawed XSS filter.

## To solve the lab, use a WebSocket message to trigger an `alert()` popup in the support agent's browser.

---

### step 1

go to chat section start chat intercept chat and sent to repeater

add this payload

```html
<img src="1" onerror="alert(1)" />
```

you will notice it will block the url of chat so you cannot access chat page
to access chat page you need to use X`-Forwarded-For: 1.1.1.1` in place of `1.1.1.1` try `127.0.0.1`
put at the end and reconnect
use this payload

```html
<img src="1" oNeRrOr="alert`1`" />
```
